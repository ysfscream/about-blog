(window.webpackJsonp=window.webpackJsonp||[]).push([[189],{227:function(s,n,t){"use strict";t.r(n);var e=t(0),a=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"nodejs-编写命令行工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nodejs-编写命令行工具","aria-hidden":"true"}},[s._v("#")]),s._v(" NodeJs 编写命令行工具")]),s._v(" "),t("p",[s._v("http://www.ruanyifeng.com/blog/2015/05/command-line-with-node.html")]),s._v(" "),t("p",[s._v("https://juejin.im/post/5bd90d3ce51d4579362b0390")]),s._v(" "),t("p",[s._v("在模块下的 package.json 加入 bin 字段，将 hello 的路径加入环境变量 PATH")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bin"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hello"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("然后执行 npm link 命令，将命令捆绑到全局。")]),s._v(" "),t("p",[s._v("npm检测到package.json里面存在一个bin字段，它就同时在全局npm包目录下生成了一个可执行文件：")]),s._v(" "),t("blockquote",[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n")])])])]),s._v(" "),t("p",[s._v("现在再执行 hello ，就不用输入路径了。")]),s._v(" "),t("blockquote",[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ hello\nhello world\n")])])])]),s._v(" "),t("p",[s._v("当我们在系统命令行直接执行 hello 的时候，实际上就是执行这里的脚本。\n因为安装node的时候，npm将这个目录配置为系统变量环境了，当你执行命令的时候，系统会先找系统命令和系统变量，然后到变量环境里面去查找这个命令名，然后找到这个目录后，发现匹配上了该命令名的可执行文件，接着就直接执行它。vue-cli也好，webpack-cli也好，都是这样执行的。")]),s._v(" "),t("p",[s._v("如果你仅希望在项目里执行，则需要在你项目里面新建一个目录，重复上述的操作，不要llink到全局里面去，而是使用"),t("code",[s._v("npm i -D file:<你的脚本目录路径>")]),s._v("，把它当成项目的依赖安装到node_modules里面去，如果安装成功，那么在项目的package.json你会看到多了一条依赖，这条依赖的值不是版本号，而是你脚本的路径。然后在node_modules里面会有一个.bin目录，里面就存放着你的可执行文件。")]),s._v(" "),t("blockquote",[t("p",[s._v("局部安装建议用"),t("code",[s._v("npm i -D file:xxx")]),s._v("，这样它会在package.json留条记录，方便其他小伙伴看到。自然，你的脚本最好也是放进项目目录里面。")])]),s._v(" "),t("p",[s._v("这里也给我们提供了一个cli开发流程思路：")]),s._v(" "),t("ul",[t("li",[s._v("初期开发可以通过"),t("code",[s._v("node index.js")]),s._v("来看效果。")]),s._v(" "),t("li",[s._v("测试的时候可以通过"),t("code",[s._v("npm link")]),s._v("的方式进行安装测试。")]),s._v(" "),t("li",[s._v("发布")])])])}],!1,null,null,null);a.options.__file="NodeJs 编写命令行工具.md";n.default=a.exports}}]);