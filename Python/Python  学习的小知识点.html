<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python  学习的部分知识点 | 扁头的窝子 | Notes</title>
    <meta name="description" content="Yushifan&#39;s personal messy notes">
    
    
    <link rel="preload" href="/about-notes/assets/css/0.styles.b4612dfc.css" as="style"><link rel="preload" href="/about-notes/assets/js/app.46379bb3.js" as="script"><link rel="preload" href="/about-notes/assets/js/2.c87c5fc1.js" as="script"><link rel="preload" href="/about-notes/assets/js/234.c79c48e9.js" as="script"><link rel="prefetch" href="/about-notes/assets/js/10.a0069d4c.js"><link rel="prefetch" href="/about-notes/assets/js/100.d8af6333.js"><link rel="prefetch" href="/about-notes/assets/js/101.e286eaf8.js"><link rel="prefetch" href="/about-notes/assets/js/102.68c83439.js"><link rel="prefetch" href="/about-notes/assets/js/103.9ca225ba.js"><link rel="prefetch" href="/about-notes/assets/js/104.2aa9acd9.js"><link rel="prefetch" href="/about-notes/assets/js/105.54cb1e0e.js"><link rel="prefetch" href="/about-notes/assets/js/106.14ea45c0.js"><link rel="prefetch" href="/about-notes/assets/js/107.43bd0ee8.js"><link rel="prefetch" href="/about-notes/assets/js/108.060b5f68.js"><link rel="prefetch" href="/about-notes/assets/js/109.a637898b.js"><link rel="prefetch" href="/about-notes/assets/js/11.5d285e6a.js"><link rel="prefetch" href="/about-notes/assets/js/110.0e4fd7b4.js"><link rel="prefetch" href="/about-notes/assets/js/111.11ebff49.js"><link rel="prefetch" href="/about-notes/assets/js/112.526423dd.js"><link rel="prefetch" href="/about-notes/assets/js/113.27b2b87b.js"><link rel="prefetch" href="/about-notes/assets/js/114.e6127347.js"><link rel="prefetch" href="/about-notes/assets/js/115.e6820e66.js"><link rel="prefetch" href="/about-notes/assets/js/116.fc437868.js"><link rel="prefetch" href="/about-notes/assets/js/117.aba30bbb.js"><link rel="prefetch" href="/about-notes/assets/js/118.8897431f.js"><link rel="prefetch" href="/about-notes/assets/js/119.476d6737.js"><link rel="prefetch" href="/about-notes/assets/js/12.c4de78c5.js"><link rel="prefetch" href="/about-notes/assets/js/120.37f1b016.js"><link rel="prefetch" href="/about-notes/assets/js/121.f0c78269.js"><link rel="prefetch" href="/about-notes/assets/js/122.efe72067.js"><link rel="prefetch" href="/about-notes/assets/js/123.640ac87b.js"><link rel="prefetch" href="/about-notes/assets/js/124.e9c5a85b.js"><link rel="prefetch" href="/about-notes/assets/js/125.75301302.js"><link rel="prefetch" href="/about-notes/assets/js/126.a16a4b6e.js"><link rel="prefetch" href="/about-notes/assets/js/127.791be5bb.js"><link rel="prefetch" href="/about-notes/assets/js/128.fa211e9a.js"><link rel="prefetch" href="/about-notes/assets/js/129.d4abc82b.js"><link rel="prefetch" href="/about-notes/assets/js/13.fdef1574.js"><link rel="prefetch" href="/about-notes/assets/js/130.88ab3ce4.js"><link rel="prefetch" href="/about-notes/assets/js/131.d27ccc0a.js"><link rel="prefetch" href="/about-notes/assets/js/132.4204c0f0.js"><link rel="prefetch" href="/about-notes/assets/js/133.cff8cbd1.js"><link rel="prefetch" href="/about-notes/assets/js/134.e4efdeb1.js"><link rel="prefetch" href="/about-notes/assets/js/135.33ffbc27.js"><link rel="prefetch" href="/about-notes/assets/js/136.54da9c4d.js"><link rel="prefetch" href="/about-notes/assets/js/137.268210c5.js"><link rel="prefetch" href="/about-notes/assets/js/138.7fc52b05.js"><link rel="prefetch" href="/about-notes/assets/js/139.3401d595.js"><link rel="prefetch" href="/about-notes/assets/js/14.807a8997.js"><link rel="prefetch" href="/about-notes/assets/js/140.058dd0f9.js"><link rel="prefetch" href="/about-notes/assets/js/141.c9e056bd.js"><link rel="prefetch" href="/about-notes/assets/js/142.9c8272ac.js"><link rel="prefetch" href="/about-notes/assets/js/143.95495f5f.js"><link rel="prefetch" href="/about-notes/assets/js/144.e4a459c3.js"><link rel="prefetch" href="/about-notes/assets/js/145.7af1e309.js"><link rel="prefetch" href="/about-notes/assets/js/146.3855b8f4.js"><link rel="prefetch" href="/about-notes/assets/js/147.d7e4bcb6.js"><link rel="prefetch" href="/about-notes/assets/js/148.459ffc33.js"><link rel="prefetch" href="/about-notes/assets/js/149.b0a2ccd9.js"><link rel="prefetch" href="/about-notes/assets/js/15.3bbe86a0.js"><link rel="prefetch" href="/about-notes/assets/js/150.12dbe367.js"><link rel="prefetch" href="/about-notes/assets/js/151.cb93b457.js"><link rel="prefetch" href="/about-notes/assets/js/152.644976d4.js"><link rel="prefetch" href="/about-notes/assets/js/153.5aea3f10.js"><link rel="prefetch" href="/about-notes/assets/js/154.1149f9f0.js"><link rel="prefetch" href="/about-notes/assets/js/155.68537194.js"><link rel="prefetch" href="/about-notes/assets/js/156.aafe0abf.js"><link rel="prefetch" href="/about-notes/assets/js/157.1eb9ee25.js"><link rel="prefetch" href="/about-notes/assets/js/158.779fea88.js"><link rel="prefetch" href="/about-notes/assets/js/159.4a0a78ed.js"><link rel="prefetch" href="/about-notes/assets/js/16.7e834764.js"><link rel="prefetch" href="/about-notes/assets/js/160.6898a5c8.js"><link rel="prefetch" href="/about-notes/assets/js/161.a282819e.js"><link rel="prefetch" href="/about-notes/assets/js/162.9572ed64.js"><link rel="prefetch" href="/about-notes/assets/js/163.ff6e70d2.js"><link rel="prefetch" href="/about-notes/assets/js/164.ae6a0246.js"><link rel="prefetch" href="/about-notes/assets/js/165.b26242a9.js"><link rel="prefetch" href="/about-notes/assets/js/166.c2556aa5.js"><link rel="prefetch" href="/about-notes/assets/js/167.3ce4398c.js"><link rel="prefetch" href="/about-notes/assets/js/168.d3ec718f.js"><link rel="prefetch" href="/about-notes/assets/js/169.b096d32f.js"><link rel="prefetch" href="/about-notes/assets/js/17.0da74621.js"><link rel="prefetch" href="/about-notes/assets/js/170.c3de3bbb.js"><link rel="prefetch" href="/about-notes/assets/js/171.60ec89a1.js"><link rel="prefetch" href="/about-notes/assets/js/172.16d89983.js"><link rel="prefetch" href="/about-notes/assets/js/173.cdb5e105.js"><link rel="prefetch" href="/about-notes/assets/js/174.63db3c41.js"><link rel="prefetch" href="/about-notes/assets/js/175.4f416454.js"><link rel="prefetch" href="/about-notes/assets/js/176.597524e6.js"><link rel="prefetch" href="/about-notes/assets/js/177.df570933.js"><link rel="prefetch" href="/about-notes/assets/js/178.c02ad511.js"><link rel="prefetch" href="/about-notes/assets/js/179.e45d3e05.js"><link rel="prefetch" href="/about-notes/assets/js/18.d684a7c0.js"><link rel="prefetch" href="/about-notes/assets/js/180.e1ce331d.js"><link rel="prefetch" href="/about-notes/assets/js/181.0e3dc8a6.js"><link rel="prefetch" href="/about-notes/assets/js/182.23e55360.js"><link rel="prefetch" href="/about-notes/assets/js/183.a2359c99.js"><link rel="prefetch" href="/about-notes/assets/js/184.eeee4866.js"><link rel="prefetch" href="/about-notes/assets/js/185.2d6eea5a.js"><link rel="prefetch" href="/about-notes/assets/js/186.17a8cf22.js"><link rel="prefetch" href="/about-notes/assets/js/187.99448f91.js"><link rel="prefetch" href="/about-notes/assets/js/188.829506f2.js"><link rel="prefetch" href="/about-notes/assets/js/189.bc37a710.js"><link rel="prefetch" href="/about-notes/assets/js/19.831bf823.js"><link rel="prefetch" href="/about-notes/assets/js/190.a5b1624e.js"><link rel="prefetch" href="/about-notes/assets/js/191.d106e170.js"><link rel="prefetch" href="/about-notes/assets/js/192.2f7832d9.js"><link rel="prefetch" href="/about-notes/assets/js/193.20dcb211.js"><link rel="prefetch" href="/about-notes/assets/js/194.95dc9afb.js"><link rel="prefetch" href="/about-notes/assets/js/195.6ff3ba48.js"><link rel="prefetch" href="/about-notes/assets/js/196.3bed209d.js"><link rel="prefetch" href="/about-notes/assets/js/197.a855dad1.js"><link rel="prefetch" href="/about-notes/assets/js/198.51841448.js"><link rel="prefetch" href="/about-notes/assets/js/199.035a0a17.js"><link rel="prefetch" href="/about-notes/assets/js/20.6303a592.js"><link rel="prefetch" href="/about-notes/assets/js/200.7ef6aa7c.js"><link rel="prefetch" href="/about-notes/assets/js/201.9a3b525b.js"><link rel="prefetch" href="/about-notes/assets/js/202.aae9c3aa.js"><link rel="prefetch" href="/about-notes/assets/js/203.984210e6.js"><link rel="prefetch" href="/about-notes/assets/js/204.f6899f02.js"><link rel="prefetch" href="/about-notes/assets/js/205.29c215da.js"><link rel="prefetch" href="/about-notes/assets/js/206.86df9dd3.js"><link rel="prefetch" href="/about-notes/assets/js/207.704c1c3e.js"><link rel="prefetch" href="/about-notes/assets/js/208.b3e8508a.js"><link rel="prefetch" href="/about-notes/assets/js/209.4500671a.js"><link rel="prefetch" href="/about-notes/assets/js/21.03d45140.js"><link rel="prefetch" href="/about-notes/assets/js/210.708a6f38.js"><link rel="prefetch" href="/about-notes/assets/js/211.a428c3c1.js"><link rel="prefetch" href="/about-notes/assets/js/212.9eefc009.js"><link rel="prefetch" href="/about-notes/assets/js/213.a06f58d8.js"><link rel="prefetch" href="/about-notes/assets/js/214.82cad99a.js"><link rel="prefetch" href="/about-notes/assets/js/215.8387c198.js"><link rel="prefetch" href="/about-notes/assets/js/216.3556ebd2.js"><link rel="prefetch" href="/about-notes/assets/js/217.025850a8.js"><link rel="prefetch" href="/about-notes/assets/js/218.7183eada.js"><link rel="prefetch" href="/about-notes/assets/js/219.0d0af272.js"><link rel="prefetch" href="/about-notes/assets/js/22.39fbf1f3.js"><link rel="prefetch" href="/about-notes/assets/js/220.4bc49e7f.js"><link rel="prefetch" href="/about-notes/assets/js/221.e65d2319.js"><link rel="prefetch" href="/about-notes/assets/js/222.2a928774.js"><link rel="prefetch" href="/about-notes/assets/js/223.4582ad50.js"><link rel="prefetch" href="/about-notes/assets/js/224.b53c57be.js"><link rel="prefetch" href="/about-notes/assets/js/225.c80a260b.js"><link rel="prefetch" href="/about-notes/assets/js/226.e564938b.js"><link rel="prefetch" href="/about-notes/assets/js/227.b64add91.js"><link rel="prefetch" href="/about-notes/assets/js/228.da5184f2.js"><link rel="prefetch" href="/about-notes/assets/js/229.e87cc1d5.js"><link rel="prefetch" href="/about-notes/assets/js/23.5a4fde23.js"><link rel="prefetch" href="/about-notes/assets/js/230.d940be12.js"><link rel="prefetch" href="/about-notes/assets/js/231.55552fcd.js"><link rel="prefetch" href="/about-notes/assets/js/232.4ac7be14.js"><link rel="prefetch" href="/about-notes/assets/js/233.e2c8a284.js"><link rel="prefetch" href="/about-notes/assets/js/235.4727ad39.js"><link rel="prefetch" href="/about-notes/assets/js/236.b4906733.js"><link rel="prefetch" href="/about-notes/assets/js/237.462f0a7e.js"><link rel="prefetch" href="/about-notes/assets/js/238.56b63fc1.js"><link rel="prefetch" href="/about-notes/assets/js/239.98d89d56.js"><link rel="prefetch" href="/about-notes/assets/js/24.07ec1836.js"><link rel="prefetch" href="/about-notes/assets/js/240.0c383aa5.js"><link rel="prefetch" href="/about-notes/assets/js/241.e266c228.js"><link rel="prefetch" href="/about-notes/assets/js/242.e53176e2.js"><link rel="prefetch" href="/about-notes/assets/js/243.2d811f36.js"><link rel="prefetch" href="/about-notes/assets/js/244.41d50fa8.js"><link rel="prefetch" href="/about-notes/assets/js/245.d69ee7ea.js"><link rel="prefetch" href="/about-notes/assets/js/246.6d4c2d25.js"><link rel="prefetch" href="/about-notes/assets/js/247.dd1b98b2.js"><link rel="prefetch" href="/about-notes/assets/js/248.0748029b.js"><link rel="prefetch" href="/about-notes/assets/js/249.5b16375c.js"><link rel="prefetch" href="/about-notes/assets/js/25.841f1892.js"><link rel="prefetch" href="/about-notes/assets/js/250.c3bf24db.js"><link rel="prefetch" href="/about-notes/assets/js/251.a6c0182c.js"><link rel="prefetch" href="/about-notes/assets/js/252.3418ad74.js"><link rel="prefetch" href="/about-notes/assets/js/253.05a357e7.js"><link rel="prefetch" href="/about-notes/assets/js/254.5b228a95.js"><link rel="prefetch" href="/about-notes/assets/js/255.d8b71daa.js"><link rel="prefetch" href="/about-notes/assets/js/256.ba5de089.js"><link rel="prefetch" href="/about-notes/assets/js/257.b41f257f.js"><link rel="prefetch" href="/about-notes/assets/js/258.71ee7689.js"><link rel="prefetch" href="/about-notes/assets/js/259.d44cd26f.js"><link rel="prefetch" href="/about-notes/assets/js/26.ec4a95a0.js"><link rel="prefetch" href="/about-notes/assets/js/260.342f3a43.js"><link rel="prefetch" href="/about-notes/assets/js/261.3803730e.js"><link rel="prefetch" href="/about-notes/assets/js/262.505300d0.js"><link rel="prefetch" href="/about-notes/assets/js/263.85bbcd08.js"><link rel="prefetch" href="/about-notes/assets/js/264.139b349d.js"><link rel="prefetch" href="/about-notes/assets/js/265.bc619cdf.js"><link rel="prefetch" href="/about-notes/assets/js/266.727e0718.js"><link rel="prefetch" href="/about-notes/assets/js/267.d2b097f5.js"><link rel="prefetch" href="/about-notes/assets/js/268.b2230e59.js"><link rel="prefetch" href="/about-notes/assets/js/269.07169355.js"><link rel="prefetch" href="/about-notes/assets/js/27.341f21b0.js"><link rel="prefetch" href="/about-notes/assets/js/270.59da57fb.js"><link rel="prefetch" href="/about-notes/assets/js/271.f3103b41.js"><link rel="prefetch" href="/about-notes/assets/js/272.eaec100f.js"><link rel="prefetch" href="/about-notes/assets/js/273.cffeaf42.js"><link rel="prefetch" href="/about-notes/assets/js/274.2df7321d.js"><link rel="prefetch" href="/about-notes/assets/js/275.7766ee6f.js"><link rel="prefetch" href="/about-notes/assets/js/276.d23176e0.js"><link rel="prefetch" href="/about-notes/assets/js/277.f7ac4b9b.js"><link rel="prefetch" href="/about-notes/assets/js/278.fba335fd.js"><link rel="prefetch" href="/about-notes/assets/js/279.61334ff2.js"><link rel="prefetch" href="/about-notes/assets/js/28.44d0892f.js"><link rel="prefetch" href="/about-notes/assets/js/280.7f940580.js"><link rel="prefetch" href="/about-notes/assets/js/281.a73766b9.js"><link rel="prefetch" href="/about-notes/assets/js/282.018298bd.js"><link rel="prefetch" href="/about-notes/assets/js/283.d1c9eef0.js"><link rel="prefetch" href="/about-notes/assets/js/284.0248d480.js"><link rel="prefetch" href="/about-notes/assets/js/285.4cfa5637.js"><link rel="prefetch" href="/about-notes/assets/js/286.e0829995.js"><link rel="prefetch" href="/about-notes/assets/js/287.c67e62ae.js"><link rel="prefetch" href="/about-notes/assets/js/288.8cd96528.js"><link rel="prefetch" href="/about-notes/assets/js/289.161c1dd1.js"><link rel="prefetch" href="/about-notes/assets/js/29.5e9ecdfb.js"><link rel="prefetch" href="/about-notes/assets/js/290.75d62e6d.js"><link rel="prefetch" href="/about-notes/assets/js/291.50e8c94c.js"><link rel="prefetch" href="/about-notes/assets/js/292.4bd666bb.js"><link rel="prefetch" href="/about-notes/assets/js/293.75ad1b2c.js"><link rel="prefetch" href="/about-notes/assets/js/294.c569e9d0.js"><link rel="prefetch" href="/about-notes/assets/js/295.a2fb6800.js"><link rel="prefetch" href="/about-notes/assets/js/296.a5ce2f34.js"><link rel="prefetch" href="/about-notes/assets/js/297.ca3919e1.js"><link rel="prefetch" href="/about-notes/assets/js/298.509fd23f.js"><link rel="prefetch" href="/about-notes/assets/js/299.97271225.js"><link rel="prefetch" href="/about-notes/assets/js/3.14bf0afa.js"><link rel="prefetch" href="/about-notes/assets/js/30.6401579e.js"><link rel="prefetch" href="/about-notes/assets/js/300.591b2e5d.js"><link rel="prefetch" href="/about-notes/assets/js/301.aa7c4e87.js"><link rel="prefetch" href="/about-notes/assets/js/302.f489fd85.js"><link rel="prefetch" href="/about-notes/assets/js/303.ac3fdd06.js"><link rel="prefetch" href="/about-notes/assets/js/304.bca05985.js"><link rel="prefetch" href="/about-notes/assets/js/305.b981b4d0.js"><link rel="prefetch" href="/about-notes/assets/js/306.c7ee4b5a.js"><link rel="prefetch" href="/about-notes/assets/js/307.69a1e822.js"><link rel="prefetch" href="/about-notes/assets/js/308.74d4fe7a.js"><link rel="prefetch" href="/about-notes/assets/js/309.ce3228a4.js"><link rel="prefetch" href="/about-notes/assets/js/31.8dfa20a4.js"><link rel="prefetch" href="/about-notes/assets/js/310.99623253.js"><link rel="prefetch" href="/about-notes/assets/js/311.1a95b5f2.js"><link rel="prefetch" href="/about-notes/assets/js/312.4324fe23.js"><link rel="prefetch" href="/about-notes/assets/js/313.17a28dc7.js"><link rel="prefetch" href="/about-notes/assets/js/32.2a2c423e.js"><link rel="prefetch" href="/about-notes/assets/js/33.9bb820f5.js"><link rel="prefetch" href="/about-notes/assets/js/34.9a6458a8.js"><link rel="prefetch" href="/about-notes/assets/js/35.261c75ea.js"><link rel="prefetch" href="/about-notes/assets/js/36.f59be358.js"><link rel="prefetch" href="/about-notes/assets/js/37.fb134e1e.js"><link rel="prefetch" href="/about-notes/assets/js/38.f5b27695.js"><link rel="prefetch" href="/about-notes/assets/js/39.9959eba2.js"><link rel="prefetch" href="/about-notes/assets/js/4.71e64c8d.js"><link rel="prefetch" href="/about-notes/assets/js/40.d166e3f3.js"><link rel="prefetch" href="/about-notes/assets/js/41.99433c9e.js"><link rel="prefetch" href="/about-notes/assets/js/42.3665604a.js"><link rel="prefetch" href="/about-notes/assets/js/43.def84f87.js"><link rel="prefetch" href="/about-notes/assets/js/44.401c1f5d.js"><link rel="prefetch" href="/about-notes/assets/js/45.d15be144.js"><link rel="prefetch" href="/about-notes/assets/js/46.4e0a12a4.js"><link rel="prefetch" href="/about-notes/assets/js/47.20b7391d.js"><link rel="prefetch" href="/about-notes/assets/js/48.473f8381.js"><link rel="prefetch" href="/about-notes/assets/js/49.cef57fde.js"><link rel="prefetch" href="/about-notes/assets/js/5.5f6a41d9.js"><link rel="prefetch" href="/about-notes/assets/js/50.369d1f68.js"><link rel="prefetch" href="/about-notes/assets/js/51.a558bab9.js"><link rel="prefetch" href="/about-notes/assets/js/52.fbeb37cb.js"><link rel="prefetch" href="/about-notes/assets/js/53.d202abcc.js"><link rel="prefetch" href="/about-notes/assets/js/54.ea0d9489.js"><link rel="prefetch" href="/about-notes/assets/js/55.b5bc98a5.js"><link rel="prefetch" href="/about-notes/assets/js/56.73cb8fd8.js"><link rel="prefetch" href="/about-notes/assets/js/57.c8c5881c.js"><link rel="prefetch" href="/about-notes/assets/js/58.1130e675.js"><link rel="prefetch" href="/about-notes/assets/js/59.b20940e2.js"><link rel="prefetch" href="/about-notes/assets/js/6.82edd843.js"><link rel="prefetch" href="/about-notes/assets/js/60.9a609df3.js"><link rel="prefetch" href="/about-notes/assets/js/61.271488e4.js"><link rel="prefetch" href="/about-notes/assets/js/62.eb659320.js"><link rel="prefetch" href="/about-notes/assets/js/63.6ca19d8a.js"><link rel="prefetch" href="/about-notes/assets/js/64.1e876c2b.js"><link rel="prefetch" href="/about-notes/assets/js/65.a325514d.js"><link rel="prefetch" href="/about-notes/assets/js/66.b834c83f.js"><link rel="prefetch" href="/about-notes/assets/js/67.f8894e84.js"><link rel="prefetch" href="/about-notes/assets/js/68.51d969ec.js"><link rel="prefetch" href="/about-notes/assets/js/69.80a059b0.js"><link rel="prefetch" href="/about-notes/assets/js/7.27e7feb7.js"><link rel="prefetch" href="/about-notes/assets/js/70.ac1b74d4.js"><link rel="prefetch" href="/about-notes/assets/js/71.6057e12d.js"><link rel="prefetch" href="/about-notes/assets/js/72.3f2b4915.js"><link rel="prefetch" href="/about-notes/assets/js/73.be0204fc.js"><link rel="prefetch" href="/about-notes/assets/js/74.259a2326.js"><link rel="prefetch" href="/about-notes/assets/js/75.d4618e68.js"><link rel="prefetch" href="/about-notes/assets/js/76.bd881536.js"><link rel="prefetch" href="/about-notes/assets/js/77.54150518.js"><link rel="prefetch" href="/about-notes/assets/js/78.1f704f3c.js"><link rel="prefetch" href="/about-notes/assets/js/79.0157aaec.js"><link rel="prefetch" href="/about-notes/assets/js/8.8ef8ec2a.js"><link rel="prefetch" href="/about-notes/assets/js/80.75cded3d.js"><link rel="prefetch" href="/about-notes/assets/js/81.043d1b42.js"><link rel="prefetch" href="/about-notes/assets/js/82.a3691011.js"><link rel="prefetch" href="/about-notes/assets/js/83.d4d575e9.js"><link rel="prefetch" href="/about-notes/assets/js/84.ae219c39.js"><link rel="prefetch" href="/about-notes/assets/js/85.f5b18281.js"><link rel="prefetch" href="/about-notes/assets/js/86.1969f9b2.js"><link rel="prefetch" href="/about-notes/assets/js/87.bae26804.js"><link rel="prefetch" href="/about-notes/assets/js/88.f7f7fcad.js"><link rel="prefetch" href="/about-notes/assets/js/89.f143f2d5.js"><link rel="prefetch" href="/about-notes/assets/js/9.57b83882.js"><link rel="prefetch" href="/about-notes/assets/js/90.cd6ed777.js"><link rel="prefetch" href="/about-notes/assets/js/91.df1c6051.js"><link rel="prefetch" href="/about-notes/assets/js/92.dd9c92cd.js"><link rel="prefetch" href="/about-notes/assets/js/93.f70b6f1d.js"><link rel="prefetch" href="/about-notes/assets/js/94.3198e8b1.js"><link rel="prefetch" href="/about-notes/assets/js/95.b1171e80.js"><link rel="prefetch" href="/about-notes/assets/js/96.566e9a75.js"><link rel="prefetch" href="/about-notes/assets/js/97.98639a5a.js"><link rel="prefetch" href="/about-notes/assets/js/98.9fd0fda8.js"><link rel="prefetch" href="/about-notes/assets/js/99.f065dd0e.js">
    <link rel="stylesheet" href="/about-notes/assets/css/0.styles.b4612dfc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/about-notes/" class="home-link router-link-active"><!----> <span class="site-name">扁头的窝子 | Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://ysfscream.xyz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home Page
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/ysfscream/about-notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/ysfscream/ysfscream.github.io/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://ysfscream.xyz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home Page
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/ysfscream/about-notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/ysfscream/ysfscream.github.io/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Electron</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Elm</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>English</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flutter</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>FrontEnd</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Interview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>IoT</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MongoDB</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Python</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/about-notes/Python/Python  学习的小知识点.html" class="active sidebar-link">Python  学习的部分知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/about-notes/Python/Python  学习的小知识点.html#基础" class="sidebar-link">基础</a></li><li class="sidebar-sub-header"><a href="/about-notes/Python/Python  学习的小知识点.html#函数" class="sidebar-link">函数</a></li><li class="sidebar-sub-header"><a href="/about-notes/Python/Python  学习的小知识点.html#高级特性" class="sidebar-link">高级特性</a></li><li class="sidebar-sub-header"><a href="/about-notes/Python/Python  学习的小知识点.html#函数式编程" class="sidebar-link">函数式编程</a></li><li class="sidebar-sub-header"><a href="/about-notes/Python/Python  学习的小知识点.html#模块" class="sidebar-link">模块</a></li><li class="sidebar-sub-header"><a href="/about-notes/Python/Python  学习的小知识点.html#面向对象" class="sidebar-link">面向对象</a></li><li class="sidebar-sub-header"><a href="/about-notes/Python/Python  学习的小知识点.html#错误处理" class="sidebar-link">错误处理</a></li></ul></li><li><a href="/about-notes/Python/Python IO 编程.html" class="sidebar-link">Pyhton IO 编程（文件）</a></li><li><a href="/about-notes/Python/Python 版本号排序.html" class="sidebar-link">Python 版本号排序</a></li><li><a href="/about-notes/Python/Python 记录.html" class="sidebar-link">Python 记录</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Rust</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>notes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>wxmp</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="python-学习的部分知识点"><a href="#python-学习的部分知识点" aria-hidden="true" class="header-anchor">#</a> Python  学习的部分知识点</h1> <p><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000" target="_blank" rel="noopener noreferrer">https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="基础"><a href="#基础" aria-hidden="true" class="header-anchor">#</a> 基础</h2> <p>list和tuple是Python内置的有序集合，一个可变，一个不可变。根据需要来选择使用它们。</p> <p>Python有五个标准的数据类型：</p> <ul><li>Numbers（数字）</li> <li>String（字符串）</li> <li>List（列表）</li> <li>Tuple（元组）</li> <li>Dictionary（字典）</li></ul> <p>其中属于集合类型的数据类型有 <strong>列表、元组及字典</strong>。</p> <p># 整数除法的结果都是向下取整</p> <p>5 // 3     # =&gt; 1
5.0 // 3.0 # =&gt; 1.0 # 浮点数也可以
-5 // 3  # =&gt; -2
-5.0 // 3.0 # =&gt; -2.0</p> <p># x的y次方</p> <p>2**4 # =&gt; 16</p> <p># 用井字符开头的是单行注释</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 用井字符开头的是单行注释</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot; 多行字符串用三个引号
    包裹，也常被用来做多
    行注释
&quot;&quot;&quot;</span>
</code></pre></div><p># 用not取非
not True  # =&gt; False
not False  # =&gt; True</p> <p># 逻辑运算符，注意and和or都是小写
True and False # =&gt; False
False or True # =&gt; True</p> <p>#用.format来格式化字符串，可以重复参数以节省时间</p> <p>&quot;{0}，{0}  can be {1}&quot;.format(&quot;strings&quot;, &quot;interpolated&quot;)</p> <p>strings, strings can be interpolated</p> <p>如果不想数参数，可以用关键字</p> <p>&quot;{name} wants to eat {food}&quot;.format(name=&quot;Bob&quot;, food=&quot;lasagna&quot;)</p> <p>#当与None进行比较时不要用 ==，要用is。is是用来比较两个变量是否指向同一个对象。</p> <p>&quot;etc&quot; is None  # =&gt; False
None is None  # =&gt; True</p> <p>#None，0，空字符串，空列表，空字典都算是False</p> <p>#所有其他值都是True</p> <p>bool(0)  # =&gt; False
bool(&quot;&quot;)  # =&gt; False
bool([]) # =&gt; False
bool({}) # =&gt; False</p> <h2 id="函数"><a href="#函数" aria-hidden="true" class="header-anchor">#</a> 函数</h2> <p>函数可以同时返回多个值，但其实就是一个tuple。</p> <h3 id="参数"><a href="#参数" aria-hidden="true" class="header-anchor">#</a> 参数</h3> <ol><li><p>Python的函数具有非常灵活的参数形态，既可以实现简单的调用，又可以传入非常复杂的参数。</p> <p>默认参数一定要用不可变对象，如果是可变对象，程序运行时会有逻辑错误！</p></li> <li><p>将参数前面带 * 号可以设置为可变参数</p></li> <li><p>要注意定义可变参数和关键字参数的语法：</p> <p><code>*args</code>是可变参数，args接收的是一个tuple；</p> <p><code>**kw</code>是关键字参数，kw接收的是一个dict。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'a ='</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token string">'b ='</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token string">'c ='</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token string">'args ='</span><span class="token punctuation">,</span> args<span class="token punctuation">,</span> <span class="token string">'kw ='</span><span class="token punctuation">,</span> kw<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">f2</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'a ='</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token string">'b ='</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token string">'c ='</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token string">'d ='</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token string">'kw ='</span><span class="token punctuation">,</span> kw<span class="token punctuation">)</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
a <span class="token operator">=</span> <span class="token number">1</span> b <span class="token operator">=</span> <span class="token number">2</span> c <span class="token operator">=</span> <span class="token number">0</span> args <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> kw <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>
a <span class="token operator">=</span> <span class="token number">1</span> b <span class="token operator">=</span> <span class="token number">2</span> c <span class="token operator">=</span> <span class="token number">3</span> args <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> kw <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span>
a <span class="token operator">=</span> <span class="token number">1</span> b <span class="token operator">=</span> <span class="token number">2</span> c <span class="token operator">=</span> <span class="token number">3</span> args <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span> kw <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">)</span>
a <span class="token operator">=</span> <span class="token number">1</span> b <span class="token operator">=</span> <span class="token number">2</span> c <span class="token operator">=</span> <span class="token number">3</span> args <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span> kw <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'x'</span><span class="token punctuation">:</span> <span class="token number">99</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f2<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> d<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">,</span> ext<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
a <span class="token operator">=</span> <span class="token number">1</span> b <span class="token operator">=</span> <span class="token number">2</span> c <span class="token operator">=</span> <span class="token number">0</span> d <span class="token operator">=</span> <span class="token number">99</span> kw <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'ext'</span><span class="token punctuation">:</span> <span class="token boolean">None</span><span class="token punctuation">}</span>
</code></pre></div></li> <li><p>以及调用函数时如何传入可变参数和关键字参数的语法：</p> <p>可变参数既可以直接传入：<code>func(1, 2, 3)</code>，又可以先组装list或tuple，再通过<code>*args</code>传入：<code>func(*(1, 2, 3))</code>；</p> <p>关键字参数既可以直接传入：<code>func(a=1, b=2)</code>，又可以先组装dict，再通过<code>**kw</code>传入：<code>func(**{'a': 1, 'b': 2})</code>。</p> <p>使用<code>*args</code>和<code>**kw</code>是Python的习惯写法，当然也可以用其他参数名，但最好使用习惯用法。</p></li> <li><p>命名的关键字参数是为了限制调用者可以传入的参数名，同时可以提供默认值。</p> <p>定义命名的关键字参数在没有可变参数的情况下不要忘了写分隔符<code>*</code>，否则定义的将是位置参数。</p> <p>调用可变参数函数时可以用*展开序列，用**展开字典。</p> <div class="language-python extra-class"><pre class="language-python"><code>args <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
kwargs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">}</span>
all_the_args<span class="token punctuation">(</span>args<span class="token punctuation">)</span>   <span class="token comment"># 相当于 foo(1, 2, 3, 4)</span>
all_the_args<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>   <span class="token comment"># 相当于 foo(a=3, b=4)</span>
all_the_args<span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>   <span class="token comment"># 相当于 foo(1, 2, 3, 4, a=3, b=4)</span>
</code></pre></div></li></ol> <h2 id="高级特性"><a href="#高级特性" aria-hidden="true" class="header-anchor">#</a> 高级特性</h2> <h3 id="切片"><a href="#切片" aria-hidden="true" class="header-anchor">#</a> 切片</h3> <p>有了切片操作，很多地方循环就不再需要了。Python的切片非常灵活，一行代码就可以实现很多行循环才能完成的操作。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Michael'</span><span class="token punctuation">,</span> <span class="token string">'Sarah'</span><span class="token punctuation">,</span> <span class="token string">'Tracy'</span><span class="token punctuation">,</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Jack'</span><span class="token punctuation">]</span>
</code></pre></div><p>取前3个元素</p> <div class="language-python extra-class"><pre class="language-python"><code>L<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">'Michael'</span><span class="token punctuation">,</span> <span class="token string">'Sarah'</span><span class="token punctuation">,</span> <span class="token string">'Tracy'</span><span class="token punctuation">]</span>
</code></pre></div><p><code>L[0:3]</code>表示，从索引<code>0</code>开始取，直到索引<code>3</code>为止，但不包括索引<code>3</code>。即索引<code>0</code>，<code>1</code>，<code>2</code>，正好是3个元素。</p> <p>如果第一个索引是<code>0</code>，还可以省略：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">'Michael'</span><span class="token punctuation">,</span> <span class="token string">'Sarah'</span><span class="token punctuation">,</span> <span class="token string">'Tracy'</span><span class="token punctuation">]</span>
</code></pre></div><p>类似的，既然Python支持<code>L[-1]</code>取倒数第一个元素，那么它同样支持倒数切片，试试：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Jack'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">'Bob'</span><span class="token punctuation">]</span>
</code></pre></div><p>记住倒数第一个元素的索引是<code>-1</code>。</p> <p>切片操作十分有用。我们先创建一个0-99的数列：</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; L = list(range(100))
&gt;&gt;&gt; L
[0, 1, 2, 3, ..., 99]
</code></pre></div><p>可以通过切片轻松取出某一段数列。比如前10个数：</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; L[:10]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</code></pre></div><p>后10个数：</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; L[-10:]
[90, 91, 92, 93, 94, 95, 96, 97, 98, 99]
</code></pre></div><p>前11-20个数：</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; L[10:20]
[10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
</code></pre></div><p>前10个数，每两个取一个：</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; L[:10:2]
[0, 2, 4, 6, 8]
</code></pre></div><p>所有数，每5个取一个：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">95</span><span class="token punctuation">]</span>
</code></pre></div><p>甚至什么都不写，只写<code>[:]</code>就可以原样复制一个list：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">]</span>
</code></pre></div><p>tuple也是一种list，唯一区别是tuple不可变。因此，tuple也可以用切片操作，只是操作的结果仍是tuple：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>字符串<code>'xxx'</code>也可以看成是一种list，每个元素就是一个字符。因此，字符串也可以用切片操作，只是操作结果仍是字符串：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'ABCDEFG'</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token string">'ABC'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string">'ABCDEFG'</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token string">'ACEG'</span>
</code></pre></div><p>在很多编程语言中，针对字符串提供了很多各种截取函数（例如，substring），其实目的就是对字符串切片。Python没有针对字符串的截取函数，只需要切片一个操作就可以完成，非常简单。</p> <p>列表有切割语法</p> <p>li[1:3]  # =&gt; [2, 4]</p> <p>取尾</p> <p>li[2:]  # =&gt; [4, 3]</p> <p>取头</p> <p>li[:3]  # =&gt; [1, 2, 4]</p> <p>隔一个取一个</p> <p>li[::2]   # =&gt;[1, 4]</p> <p>倒排列表</p> <p>li[::-1]   # =&gt; [3, 4, 2, 1]</p> <p>可以用三个参数的任何组合来构建切割</p> <p>li[始:终:步伐]</p> <h3 id="迭代"><a href="#迭代" aria-hidden="true" class="header-anchor">#</a> 迭代</h3> <p>任何可迭代对象都可以作用于<code>for</code>循环，包括我们自定义的数据类型，只要符合迭代条件，就可以使用<code>for</code>循环，</p> <p>在Python中，迭代是通过<code>for ... in</code>来完成的。</p> <p>list这种数据类型虽然有下标，但很多其他数据类型是没有下标的，但是，只要是可迭代对象，无论有无下标，都可以迭代，比如dict就可以迭代：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">for</span> key <span class="token keyword">in</span> d<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
a
c
b
</code></pre></div><p>默认情况下，dict迭代的是key。如果要迭代value，可以用<code>for value in d.values()</code>，如果要同时迭代key和value，可以用<code>for k, v in d.items()</code>。</p> <p>字符串也是可迭代对象。</p> <p>Python内置的<code>enumerate</code>函数可以把一个list变成索引-元素对，这样就可以在<code>for</code>循环中同时迭代索引和元素本身：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">for</span> i<span class="token punctuation">,</span> value <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">0</span> A
<span class="token number">1</span> B
<span class="token number">2</span> C
</code></pre></div><p>上面的<code>for</code>循环里，同时引用了两个变量，在Python里是很常见的，比如下面的代码：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">1</span> <span class="token number">1</span>
<span class="token number">2</span> <span class="token number">4</span>
<span class="token number">3</span> <span class="token number">9</span>
</code></pre></div><h3 id="列表生成式"><a href="#列表生成式" aria-hidden="true" class="header-anchor">#</a> 列表生成式</h3> <p>如果要生成<code>[1x1, 2x2, 3x3, ..., 10x10]</code>利用列表生成器</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>x <span class="token operator">*</span> x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span>
</code></pre></div><p>写列表生成式时，把要生成的元素<code>x * x</code>放到前面，后面跟<code>for</code>循环，就可以把list创建出来，十分有用，多写几次，很快就可以熟悉这种语法。</p> <p>for循环后面还可以加上if判断，这样我们就可以筛选出仅偶数的平方：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>x <span class="token operator">*</span> x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">if</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span>
</code></pre></div><p>还可以使用两层循环，可以生成全排列：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>m <span class="token operator">+</span> n <span class="token keyword">for</span> m <span class="token keyword">in</span> <span class="token string">'ABC'</span> <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token string">'XYZ'</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">'AX'</span><span class="token punctuation">,</span> <span class="token string">'AY'</span><span class="token punctuation">,</span> <span class="token string">'AZ'</span><span class="token punctuation">,</span> <span class="token string">'BX'</span><span class="token punctuation">,</span> <span class="token string">'BY'</span><span class="token punctuation">,</span> <span class="token string">'BZ'</span><span class="token punctuation">,</span> <span class="token string">'CX'</span><span class="token punctuation">,</span> <span class="token string">'CY'</span><span class="token punctuation">,</span> <span class="token string">'CZ'</span><span class="token punctuation">]</span>
</code></pre></div><p>运用列表生成式，可以快速生成list，可以通过一个list推导出另一个list</p> <h3 id="生成器-generator"><a href="#生成器-generator" aria-hidden="true" class="header-anchor">#</a> 生成器 generator</h3> <ol><li>要创建一个generator，有很多种方法。第一种方法很简单，只要把一个列表生成式的<code>[]</code>改成<code>()</code>，就创建了一个generator：</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L <span class="token operator">=</span> <span class="token punctuation">[</span>x <span class="token operator">*</span> x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> L
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> g <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">*</span> x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> g
<span class="token operator">&lt;</span>generator <span class="token builtin">object</span> <span class="token operator">&lt;</span>genexpr<span class="token operator">&gt;</span> at <span class="token number">0x1022ef630</span><span class="token operator">&gt;</span>
</code></pre></div><p>可以通过<code>next()</code>函数获得generator的下一个返回值</p> <p>正确的方法是使用<code>for</code>循环，因为generator也是可迭代对象：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> g <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">*</span> x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">for</span> n <span class="token keyword">in</span> g<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token number">0</span>
<span class="token number">1</span>
<span class="token number">4</span>
<span class="token number">9</span>
<span class="token number">16</span>
<span class="token number">25</span>
<span class="token number">36</span>
<span class="token number">49</span>
<span class="token number">64</span>
<span class="token number">81</span>
</code></pre></div><ol start="2"><li>我们创建了一个generator后，基本上永远不会调用<code>next()</code>，而是通过<code>for</code>循环来迭代它</li> <li>另一种方法。如果一个函数定义中包含<code>yield</code>关键字，那么这个函数就不再是一个普通函数，而是一个generator</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;斐波那数列&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    n<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token keyword">while</span> n <span class="token operator">&lt;</span> <span class="token builtin">max</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> b
        a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a <span class="token operator">+</span> b
        n <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">return</span> <span class="token string">'done'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> fib<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f
<span class="token operator">&lt;</span>generator <span class="token builtin">object</span> fib at <span class="token number">0x104feaaa0</span><span class="token operator">&gt;</span>
</code></pre></div><p>这里，最难理解的就是generator和函数的执行流程不一样。函数是顺序执行，遇到<code>return</code>语句或者最后一行函数语句就返回。而变成generator的函数，在每次调用<code>next()</code>的时候执行，遇到<code>yield</code>语句返回，再次执行时从上次返回的<code>yield</code>语句处继续执行。</p> <p>但是用<code>for</code>循环调用generator时，发现拿不到generator的<code>return</code>语句的返回值。如果想要拿到返回值，必须捕获<code>StopIteration</code>错误，返回值包含在<code>StopIteration</code>的<code>value</code>中：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> g <span class="token operator">=</span> fib<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">try</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         x <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'g:'</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">except</span> StopIteration <span class="token keyword">as</span> e<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Generator return value:'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         <span class="token keyword">break</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
g<span class="token punctuation">:</span> <span class="token number">1</span>
g<span class="token punctuation">:</span> <span class="token number">1</span>
g<span class="token punctuation">:</span> <span class="token number">2</span>
g<span class="token punctuation">:</span> <span class="token number">3</span>
g<span class="token punctuation">:</span> <span class="token number">5</span>
g<span class="token punctuation">:</span> <span class="token number">8</span>
Generator <span class="token keyword">return</span> value<span class="token punctuation">:</span> done
</code></pre></div><p>generator是非常强大的工具，在Python中，可以简单地把列表生成式改成generator，也可以通过函数实现复杂逻辑的generator。</p> <p>要理解generator的工作原理，它是在<code>for</code>循环的过程中不断计算出下一个元素，并在适当的条件结束<code>for</code>循环。对于函数改成的generator来说，遇到<code>return</code>语句或者执行到函数体最后一行语句，就是结束generator的指令，<code>for</code>循环随之结束。</p> <p>请注意区分普通函数和generator函数，普通函数调用直接返回结果：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> <span class="token builtin">abs</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r
<span class="token number">6</span>
</code></pre></div><p>generator函数的“调用”实际返回一个generator对象：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> g <span class="token operator">=</span> fib<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> g
<span class="token operator">&lt;</span>generator <span class="token builtin">object</span> fib at <span class="token number">0x1022ef948</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="迭代器-iterator"><a href="#迭代器-iterator" aria-hidden="true" class="header-anchor">#</a> 迭代器 Iterator</h3> <ol><li><p>我们已经知道，可以直接作用于<code>for</code>循环的数据类型有以下几种：</p> <p>一类是集合数据类型，如<code>list</code>、<code>tuple</code>、<code>dict</code>、<code>set</code>、<code>str</code>等；</p> <p>一类是<code>generator</code>，包括生成器和带<code>yield</code>的 <code>generator function</code>。</p> <p>这些可以直接作用于<code>for</code>循环的对象统称为：<code>Iterable</code>（可迭代对象）。</p> <p>凡是可作用于<code>for</code>循环的对象都是<code>Iterable</code>类型；</p></li> <li><p>凡是可作用于<code>next()</code>函数的对象都是<code>Iterator</code>（迭代器）类型，它们表示一个惰性计算的序列；</p> <p>集合数据类型如<code>list</code>、<code>dict</code>、<code>str</code>等是<code>Iterable</code>但不是<code>Iterator</code>，不过可以通过<code>iter()</code>函数获得一个<code>Iterator</code>对象。</p> <p>Python的<code>for</code>循环本质上就是通过不断调用<code>next()</code>函数实现的，例如：</p></li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre></div><p>​	实际上完全等价于：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 首先获得Iterator对象:</span>
it <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 循环:</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># 获得下一个值:</span>
        x <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
    <span class="token keyword">except</span> StopIteration<span class="token punctuation">:</span>
        <span class="token comment"># 遇到StopIteration就退出循环</span>
        <span class="token keyword">break</span>
</code></pre></div><p>StopIteration 异常用于标识迭代的完成</p> <h3 id="迭代器-生成器-的区别"><a href="#迭代器-生成器-的区别" aria-hidden="true" class="header-anchor">#</a> 迭代器 生成器 的区别</h3> <p><strong>在 Python 中，使用了 yield 的函数被称为生成器（generator）。</strong></p> <p><strong>跟普通函数不同的是，生成器是一个返回迭代器的函数，只能用于迭代操作，更简单点理解生成器就是一个迭代器。</strong></p> <p>返回的迭代器可被 next() 函数调用。</p> <p>迭代是Python最强大的功能之一，是访问集合元素的一种方式。</p> <p>迭代器是一个可以记住遍历的位置的对象。</p> <p>迭代器对象从集合的第一个元素开始访问，直到所有的元素被访问完结束。迭代器只能往前不会后退。</p> <p>迭代器有两个基本的方法：<strong>iter()</strong> 和 <strong>next()</strong>。</p> <p>在调用生成器运行的过程中，每次遇到 yield 时函数会暂停并保存当前所有的运行信息，返回 yield 的值, 并在下一次执行 next() 方法时从当前位置继续运行。</p> <p>调用一个生成器函数，返回的是一个迭代器对象。</p> <h2 id="函数式编程"><a href="#函数式编程" aria-hidden="true" class="header-anchor">#</a> 函数式编程</h2> <p>Python内建了<code>map()</code>和<code>reduce()</code>函数。</p> <h3 id="map"><a href="#map" aria-hidden="true" class="header-anchor">#</a> map</h3> <p>接收两个参数，一个是函数，一个是<code>Iterable</code>，<code>map</code>将传入的函数依次作用到序列的每个元素，并把结果作为新的<code>Iterator</code>返回。</p> <p><code>map()</code>作为高阶函数，事实上它把运算规则抽象了，因此，我们不但可以计算简单的f(x)=x^2</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">return</span> x <span class="token operator">*</span> x
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">]</span>
</code></pre></div><p>还可以计算任意复杂的函数，比如，把这个list所有数字转为字符串：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'6'</span><span class="token punctuation">,</span> <span class="token string">'7'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">,</span> <span class="token string">'9'</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="reduce"><a href="#reduce" aria-hidden="true" class="header-anchor">#</a> reduce</h3> <p>也接收一个函数和一个序列，这个函数必须接收两个参数</p> <p>比方说对一个序列求和，就可以用<code>reduce</code>实现：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token builtin">reduce</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span>add<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token number">25</span>
</code></pre></div><p>当然求和运算可以直接用Python内建函数<code>sum()</code>，没必要动用<code>reduce</code>。</p> <h3 id="filter"><a href="#filter" aria-hidden="true" class="header-anchor">#</a> filter</h3> <p>也接收一个函数和一个序列，把传入的函数依次作用于每个元素，然后根据返回值是<code>True</code>还是<code>False</code>决定保留还是丢弃该元素。</p> <p>例如，在一个list中，删掉偶数，只保留奇数，可以这么写：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">is_odd</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span>

<span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">filter</span><span class="token punctuation">(</span>is_odd<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 结果: [1, 5, 9, 15]</span>
</code></pre></div><p>把一个序列中的空字符串删掉，可以这么写：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">not_empty</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> s <span class="token operator">and</span> s<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">filter</span><span class="token punctuation">(</span>not_empty<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'  '</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 结果: ['A', 'B', 'C']</span>
</code></pre></div><p>注意到<code>filter()</code>函数返回的是一个<code>Iterator</code>，也就是一个惰性序列，所以要强迫<code>filter()</code>完成计算结果，需要用<code>list()</code>函数获得所有结果并返回list。</p> <h3 id="sorted"><a href="#sorted" aria-hidden="true" class="header-anchor">#</a> sorted</h3> <p>Python内置的<code>sorted()</code>函数就可以对list进行排序：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">]</span>
</code></pre></div><p>此外，<code>sorted()</code>函数也是一个高阶函数，它还可以接收一个<code>key</code>函数来实现自定义的排序，例如按绝对值大小排序：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token builtin">abs</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">]</span>
</code></pre></div><p>默认情况下，对字符串排序，是按照ASCII的大小比较的，由于<code>'Z' &lt; 'a'</code>，结果，大写字母<code>Z</code>会排在小写字母<code>a</code>的前面。</p> <p>要进行反向排序，不必改动key函数，可以传入第三个参数<code>reverse=True</code>：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'bob'</span><span class="token punctuation">,</span> <span class="token string">'about'</span><span class="token punctuation">,</span> <span class="token string">'Zoo'</span><span class="token punctuation">,</span> <span class="token string">'Credit'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">.</span>lower<span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'Zoo'</span><span class="token punctuation">,</span> <span class="token string">'Credit'</span><span class="token punctuation">,</span> <span class="token string">'bob'</span><span class="token punctuation">,</span> <span class="token string">'about'</span><span class="token punctuation">]</span>
</code></pre></div><p><code>sorted()</code>也是一个高阶函数。用<code>sorted()</code>排序的关键在于实现一个映射函数 key。</p> <h3 id="闭包"><a href="#闭包" aria-hidden="true" class="header-anchor">#</a> 闭包</h3> <p>注意到返回的函数在其定义内部引用了局部变量<code>args</code>，所以，当一个函数返回了一个函数后，其内部的局部变量还被新函数引用，所以，闭包用起来简单，实现起来可不容易。</p> <p>另一个需要注意的问题是，返回的函数并没有立刻执行，而是直到调用了<code>f()</code>才执行。我们来看一个例子：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    fs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
             <span class="token keyword">return</span> i<span class="token operator">*</span>i
        fs<span class="token punctuation">.</span>append<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
    <span class="token keyword">return</span> fs

f1<span class="token punctuation">,</span> f2<span class="token punctuation">,</span> f3 <span class="token operator">=</span> count<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>在上面的例子中，每次循环，都创建了一个新的函数，然后，把创建的3个函数都返回了。</p> <p>你可能认为调用<code>f1()</code>，<code>f2()</code>和<code>f3()</code>结果应该是<code>1</code>，<code>4</code>，<code>9</code>，但实际结果是：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f1<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">9</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f2<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">9</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f3<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">9</span>
</code></pre></div><p>全部都是<code>9</code>！原因就在于返回的函数引用了变量<code>i</code>，但它并非立刻执行。等到3个函数都返回时，它们所引用的变量<code>i</code>已经变成了<code>3</code>，因此最终结果为<code>9</code>。</p> <p><strong>返回闭包时牢记一点：返回函数不要引用任何循环变量，或者后续会发生变化的变量。</strong></p> <h3 id="匿名函数"><a href="#匿名函数" aria-hidden="true" class="header-anchor">#</a> 匿名函数</h3> <p>当我们在传入函数时，有些时候，不需要显式地定义函数，直接传入匿名函数更方便。</p> <p>匿名函数<code>lambda x: x * x</code>实际上就是：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">*</span> x
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    	<span class="token keyword">return</span> x <span class="token operator">*</span> x
</code></pre></div><p>关键字<code>lambda</code>表示匿名函数，冒号前面的<code>x</code>表示函数参数。</p> <p>匿名函数有个限制，就是只能有一个表达式，不用写<code>return</code>，返回值就是该表达式的结果。</p> <p>用匿名函数有个好处，因为函数没有名字，不必担心函数名冲突。此外，匿名函数也是一个函数对象，也可以把匿名函数赋值给一个变量，再利用变量来调用该函数。</p> <h3 id="装饰器"><a href="#装饰器" aria-hidden="true" class="header-anchor">#</a> 装饰器</h3> <p>在函数调用前后自动打印日志，但又不希望修改<code>now()</code>函数的定义，这种在代码运行期间动态增加功能的方式，称之为“装饰器”（Decorator）。</p> <p>本质上，decorator就是一个返回函数的高阶函数。所以，我们要定义一个能打印日志的decorator，可以定义如下：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">log</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'call %s():'</span> <span class="token operator">%</span> func<span class="token punctuation">.</span>__name__<span class="token punctuation">)</span>
        <span class="token keyword">return</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>
    <span class="token keyword">return</span> wrapper
</code></pre></div><p>观察上面的<code>log</code>，因为它是一个decorator，所以接受一个函数作为参数，并返回一个函数。我们要借助Python的@语法，把decorator置于函数的定义处：</p> <div class="language-python extra-class"><pre class="language-python"><code>@log
<span class="token keyword">def</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'2015-3-25'</span><span class="token punctuation">)</span>
</code></pre></div><p>调用<code>now()</code>函数，不仅会运行<code>now()</code>函数本身，还会在运行<code>now()</code>函数前打印一行日志：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> now<span class="token punctuation">(</span><span class="token punctuation">)</span>
call now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">2015</span><span class="token operator">-</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">25</span>
</code></pre></div><p>把<code>@log</code>放到<code>now()</code>函数的定义处，相当于执行了语句：</p> <div class="language-python extra-class"><pre class="language-python"><code>now <span class="token operator">=</span> log<span class="token punctuation">(</span>now<span class="token punctuation">)</span>
</code></pre></div><p>如果decorator本身需要传入参数，那就需要编写一个返回decorator的高阶函数，写出来会更复杂。比如，要自定义log的文本：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s %s():'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>text<span class="token punctuation">,</span> func<span class="token punctuation">.</span>__name__<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>
        <span class="token keyword">return</span> wrapper
    <span class="token keyword">return</span> decorator
</code></pre></div><p>这个3层嵌套的decorator用法如下：</p> <div class="language-python extra-class"><pre class="language-python"><code>@log<span class="token punctuation">(</span><span class="token string">'execute'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'2015-3-25'</span><span class="token punctuation">)</span>
</code></pre></div><p>执行结果如下：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> now<span class="token punctuation">(</span><span class="token punctuation">)</span>
execute now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token number">2015</span><span class="token operator">-</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">25</span>
</code></pre></div><p>和两层嵌套的decorator相比，3层嵌套的效果是这样的：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> now <span class="token operator">=</span> log<span class="token punctuation">(</span><span class="token string">'execute'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> functools
@functools<span class="token punctuation">.</span>wraps<span class="token punctuation">(</span>func<span class="token punctuation">)</span>
</code></pre></div><p><strong>记住在定义<code>wrapper()</code>的前面加上<code>@functools.wraps(func)</code>即可。</strong></p> <p>装饰器的原理就是：将源函数当作参数传入一个新函数中，新函数返回一个wraps函数，warps函数在源函数的基础上添加了一些功能而已。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">decotor</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'docotor'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            f<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">return</span> wrapper
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">def</span> <span class="token function">myFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'my func'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> myFunc <span class="token operator">=</span> decotor<span class="token punctuation">(</span>myFunc<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> myFunc<span class="token punctuation">(</span><span class="token punctuation">)</span>
docotor
my func
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>

<span class="token comment"># 等同于</span>
<span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">&quot;my decorator&quot;</span>
    <span class="token keyword">return</span> f
@decorator
<span class="token keyword">def</span> <span class="token function">myfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">&quot;my function&quot;</span>
myfunc<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="偏函数"><a href="#偏函数" aria-hidden="true" class="header-anchor">#</a> 偏函数</h3> <p>Python的<code>functools</code>模块提供了很多有用的功能，其中一个就是偏函数（Partial function）</p> <p>假设要转换大量的二进制字符串，每次都传入<code>int(x, base=2)</code>非常麻烦，于是，我们想到，可以定义一个<code>int2()</code>的函数，默认把<code>base=2</code>传进去：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">int2</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> base<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token builtin">int</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> base<span class="token punctuation">)</span>
</code></pre></div><p>这样，我们转换二进制就非常方便了：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> int2<span class="token punctuation">(</span><span class="token string">'1000000'</span><span class="token punctuation">)</span>
<span class="token number">64</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> int2<span class="token punctuation">(</span><span class="token string">'1010101'</span><span class="token punctuation">)</span>
<span class="token number">85</span>
</code></pre></div><p><code>functools.partial</code>就是帮助我们创建一个偏函数的，不需要我们自己定义<code>int2()</code>，可以直接使用下面的代码创建一个新的函数<code>int2</code>：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> functools
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> int2 <span class="token operator">=</span> functools<span class="token punctuation">.</span>partial<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> base<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> int2<span class="token punctuation">(</span><span class="token string">'1000000'</span><span class="token punctuation">)</span>
<span class="token number">64</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> int2<span class="token punctuation">(</span><span class="token string">'1010101'</span><span class="token punctuation">)</span>
<span class="token number">85</span>
</code></pre></div><p>所以，简单总结<code>functools.partial</code>的作用就是，把一个函数的某些参数给固定住（也就是设置默认值），返回一个新的函数，调用这个新函数会更简单。</p> <p>当函数的参数个数太多，需要简化时，使用<code>functools.partial</code>可以创建一个新的函数，这个新函数可以固定住原函数的部分参数，从而在调用时更简单。</p> <h2 id="模块"><a href="#模块" aria-hidden="true" class="header-anchor">#</a> 模块</h2> <p>我们以内建的<code>sys</code>模块为例，编写一个<code>hello</code>的模块：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python3</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>

<span class="token string">' a test module '</span>

__author__ <span class="token operator">=</span> <span class="token string">'Michael Liao'</span>

<span class="token keyword">import</span> sys

<span class="token keyword">def</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    args <span class="token operator">=</span> sys<span class="token punctuation">.</span>argv
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Hello, world!'</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Hello, %s!'</span> <span class="token operator">%</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Too many arguments!'</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__<span class="token operator">==</span><span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token comment"># 代码if name == 'main': 实现的功能就是Make a script both importable and executable，也就是说可以让模块既可以导入到别的模块中用，另外该模块自己也可执行。自己执行的时候__name__ == __main__, 调用执行的时候 __name_ == 该模块名</span>
    test<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>第1行和第2行是标准注释，第1行注释可以让这个<code>hello.py</code>文件直接在Unix/Linux/Mac上运行，第2行注释表示.py文件本身使用标准UTF-8编码；</p> <p>第4行是一个字符串，表示模块的文档注释，任何模块代码的第一个字符串都被视为模块的文档注释；</p> <p>第6行使用<code>__author__</code>变量把作者写进去，这样当你公开源代码后别人就可以瞻仰你的大名；</p> <p>以上就是Python模块的标准文件模板，当然也可以全部删掉不写，但是，按标准办事肯定没错。</p> <p>后面开始就是真正的代码部分。</p> <p>你可能注意到了，使用<code>sys</code>模块的第一步，就是导入该模块：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> sys
</code></pre></div><p>导入<code>sys</code>模块后，我们就有了变量<code>sys</code>指向该模块，利用<code>sys</code>这个变量，就可以访问<code>sys</code>模块的所有功能。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 导出个别值</span>
<span class="token keyword">from</span> math <span class="token keyword">import</span> ceil<span class="token punctuation">,</span> floor
<span class="token keyword">print</span><span class="token punctuation">(</span>ceil<span class="token punctuation">(</span><span class="token number">3.7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># =&gt; 4.0</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>floor<span class="token punctuation">(</span><span class="token number">3.7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># =&gt; 3.0</span>
</code></pre></div><h3 id="作用域"><a href="#作用域" aria-hidden="true" class="header-anchor">#</a> 作用域</h3> <p>在一个模块中，我们可能会定义很多函数和变量，但有的函数和变量我们希望给别人使用，有的函数和变量我们希望仅仅在模块内部使用。在Python中，是通过<code>_</code>前缀来实现的。</p> <p>正常的函数和变量名是公开的（public），可以被直接引用，比如：<code>abc</code>，<code>x123</code>，<code>PI</code>等</p> <p>类似<code>_xxx</code>和<code>__xxx</code>这样的函数或变量就是非公开的（private），不应该被直接引用，比如<code>_abc</code>，<code>__abc</code>等</p> <p>外部不需要引用的函数全部定义成private，只有外部需要引用的函数才定义为public。</p> <p># 函数作用域</p> <div class="language-python extra-class"><pre class="language-python"><code>x <span class="token operator">=</span> <span class="token number">5</span>

<span class="token keyword">def</span> <span class="token function">setX</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 局部作用域的x和全局域的x是不同的</span>
    x <span class="token operator">=</span> num <span class="token comment"># =&gt; 43</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment"># =&gt; 43</span>

<span class="token keyword">def</span> <span class="token function">setGlobalX</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> x
    <span class="token keyword">print</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment"># =&gt; 5</span>
    x <span class="token operator">=</span> num <span class="token comment"># 现在全局域的x被赋值</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment"># =&gt; 6</span>

</code></pre></div><h2 id="面向对象"><a href="#面向对象" aria-hidden="true" class="header-anchor">#</a> 面向对象</h2> <p>面向对象最重要的概念就是类（Class）和实例（Instance），必须牢记类是抽象的模板，比如Student类，而实例是根据类创建出来的一个个具体的“对象”，每个对象都拥有相同的方法，但各自的数据可能不同。</p> <p>仍以Student类为例，在Python中，定义类是通过<code>class</code>关键字：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre></div><p><code>class</code>后面紧接着是类名，即<code>Student</code>，类名通常是大写开头的单词，紧接着是<code>(object)</code>，表示该类是从哪个类继承下来的，通常，如果没有合适的继承类，就使用<code>object</code>类，这是所有类最终都会继承的类。</p> <p>由于类可以起到模板的作用，因此，可以在创建实例的时候，把一些我们认为必须绑定的属性强制填写进去。通过定义一个特殊的<code>__init__</code>方法，在创建实例的时候，就把<code>name</code>，<code>score</code>等属性绑上去：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>score <span class="token operator">=</span> score
</code></pre></div><p>注意：特殊方法“<strong>init</strong>”前后分别有两个下划线！！！</p> <p>注意到<code>__init__</code>方法的第一个参数永远是<code>self</code>，表示创建的实例本身，因此，在<code>__init__</code>方法内部，就可以把各种属性绑定到<code>self</code>，因为<code>self</code>就指向创建的实例本身。</p> <p><strong>和普通的函数相比，在类中定义的函数只有一点不同，就是第一个参数永远是实例变量<code>self</code>，并且，调用时，不用传递该参数。除此之外，类的方法和普通函数没有什么区别，所以，你仍然可以用默认参数、可变参数、关键字参数和命名关键字参数。</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>score <span class="token operator">=</span> score

    <span class="token keyword">def</span> <span class="token function">print_score</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s: %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>要定义一个方法，除了第一个参数是<code>self</code>外，其他和普通函数一样。要调用一个方法，只需要在实例变量上直接调用，除了<code>self</code>不用传递，其他参数正常传入</p> <h3 id="私有访问"><a href="#私有访问" aria-hidden="true" class="header-anchor">#</a> 私有访问</h3> <p>如果要让内部属性不被外部访问，可以把属性的名称前加上两个下划线<code>__</code>，在Python中，实例的变量名如果以<code>__</code>开头，就变成了一个私有变量（private），只有内部可以访问，外部不能访问，所以，我们把Student类改一改：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>__score <span class="token operator">=</span> score

    <span class="token keyword">def</span> <span class="token function">print_score</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s: %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>__name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__score<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>改完后，对于外部代码来说，没什么变动，但是已经无法从外部访问<code>实例变量.__name</code>和<code>实例变量.__score</code>了：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> bart <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'Bart Simpson'</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> bart<span class="token punctuation">.</span>__name
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
AttributeError<span class="token punctuation">:</span> <span class="token string">'Student'</span> <span class="token builtin">object</span> has no attribute <span class="token string">'__name'</span>
</code></pre></div><p>但是如果外部代码要获取name和score怎么办？可以给Student类增加<code>get_name</code>和<code>get_score</code>这样的方法</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">get_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> self<span class="token punctuation">.</span>_name
</code></pre></div><p>如果又要允许外部代码修改score怎么办？可以再给Student类增加<code>set_score</code>方法</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">set_name</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    slef<span class="token punctuation">.</span>_name <span class="token operator">=</span> name
</code></pre></div><p>需要注意的是，在Python中，变量名类似<code>__xxx__</code>的，也就是以双下划线开头，并且以双下划线结尾的，是特殊变量，特殊变量是可以直接访问的，不是private变量，所以，不能用<code>__name__</code>、<code>__score__</code>这样的变量名。</p> <p>有些时候，你会看到以一个下划线开头的实例变量名，比如<code>_name</code>，这样的实例变量外部是可以访问的，但是，按照约定俗成的规定，当你看到这样的变量时，意思就是，“虽然我可以被访问，但是，请把我视为私有变量，不要随意访问”。</p> <p>双下划线开头的实例变量是不是一定不能从外部访问呢？其实也不是。不能直接访问<code>__name</code>是因为Python解释器对外把<code>__name</code>变量改成了<code>_Student__name</code>，所以，仍然可以通过<code>_Student__name</code>来访问<code>__name</code>变量</p> <p>但是强烈建议你不要这么干。</p> <h3 id="继承和多态"><a href="#继承和多态" aria-hidden="true" class="header-anchor">#</a> 继承和多态</h3> <p>我们已经编写了一个名为<code>Animal</code>的class，有一个<code>run()</code>方法可以直接打印：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Animal is running...'</span><span class="token punctuation">)</span>
</code></pre></div><p>当我们需要编写<code>Dog</code>和<code>Cat</code>类时，就可以直接从<code>Animal</code>类继承：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span>Animal<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">class</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span>Animal<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre></div><p>对于<code>Dog</code>来说，<code>Animal</code>就是它的父类，对于<code>Animal</code>来说，<code>Dog</code>就是它的子类。<code>Cat</code>和<code>Dog</code>类似</p> <p>当子类和父类都存在相同的<code>run()</code>方法时，我们说，子类的<code>run()</code>覆盖了父类的<code>run()</code>，在代码运行的时候，总是会调用子类的<code>run()</code></p> <h3 id="获取对象信息"><a href="#获取对象信息" aria-hidden="true" class="header-anchor">#</a> 获取对象信息</h3> <p>总是优先使用isinstance()判断类型，可以将指定类型及其子类“一网打尽”。</p> <p>如果要获得一个对象的所有属性和方法，可以使用<code>dir()</code>函数，它返回一个包含字符串的list，比如，获得一个str对象的所有属性和方法：</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; dir('ABC')
['__add__', '__class__',..., '__subclasshook__', 'capitalize', 'casefold',..., 'zfill']
</code></pre></div><p>通过内置的一系列函数，我们可以对任意一个Python对象进行剖析，拿到其内部的数据。要注意的是，只有在不知道对象信息的时候，我们才会去获取对象信息。</p> <h3 id="实例属性和类属性"><a href="#实例属性和类属性" aria-hidden="true" class="header-anchor">#</a> 实例属性和类属性</h3> <p>实例属性属于各个实例所有，互不干扰；</p> <p>当我们定义了一个类属性后，这个属性虽然归类所有，但类的所有实例都可以访问到：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     name <span class="token operator">=</span> <span class="token string">'Student'</span>
</code></pre></div><p>类属性属于类所有，所有实例共享一个属性；</p> <p>不要对实例属性和类属性使用相同的名字，否则将产生难以发现的错误。</p> <h3 id="使用-slots"><a href="#使用-slots" aria-hidden="true" class="header-anchor">#</a> 使用 _<strong>slots_</strong></h3> <p>正常情况下，当我们定义了一个class，创建了一个class的实例后，我们可以给该实例绑定任何属性和方法，这就是动态语言的灵活性</p> <p>但是，如果我们想要限制实例的属性怎么办？比如，只允许对Student实例添加<code>name</code>和<code>age</code>属性。</p> <p>为了达到限制的目的，Python允许在定义class的时候，定义一个特殊的<code>__slots__</code>变量，来限制该class实例能添加的属性：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    __slots__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">)</span> <span class="token comment"># 用tuple定义允许绑定的属性名称</span>
</code></pre></div><p>然后，我们试试：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 创建新的实例</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Michael'</span> <span class="token comment"># 绑定属性'name'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">25</span> <span class="token comment"># 绑定属性'age'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>score <span class="token operator">=</span> <span class="token number">99</span> <span class="token comment"># 绑定属性'score'</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
AttributeError<span class="token punctuation">:</span> <span class="token string">'Student'</span> <span class="token builtin">object</span> has no attribute <span class="token string">'score'</span>
</code></pre></div><p>由于<code>'score'</code>没有被放到<code>__slots__</code>中，所以不能绑定<code>score</code>属性，试图绑定<code>score</code>将得到<code>AttributeError</code>的错误。</p> <p>使用<code>__slots__</code>要注意，<code>__slots__</code>定义的属性仅对当前类实例起作用，对继承的子类是不起作用的，</p> <p>除非在子类中也定义<code>__slots__</code>，这样，子类实例允许定义的属性就是自身的<code>__slots__</code>加上父类的<code>__slots__</code>。</p> <h3 id="property"><a href="#property" aria-hidden="true" class="header-anchor">#</a> @property</h3> <p>在绑定属性时，如果我们直接把属性暴露出去，虽然写起来很简单，但是，没办法检查参数，导致可以把成绩随便改。</p> <p>一般使用 get 和 set 方法</p> <p>Python内置的<code>@property</code>装饰器就是负责把一个方法变成属性调用的。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    @<span class="token builtin">property</span>
    <span class="token keyword">def</span> <span class="token function">score</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_score

    @score<span class="token punctuation">.</span>setter
    <span class="token keyword">def</span> <span class="token function">score</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">'score must be an integer!'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> value <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">or</span> value <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">'score must between 0 ~ 100!'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>_score <span class="token operator">=</span> value
</code></pre></div><p><code>@property</code>的实现比较复杂，我们先考察如何使用。把一个getter方法变成属性，只需要加上<code>@property</code>就可以了，此时，<code>@property</code>本身又创建了另一个装饰器<code>@score.setter</code>，负责把一个setter方法变成属性赋值，于是，我们就拥有一个可控的属性操作：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>score <span class="token operator">=</span> <span class="token number">60</span> <span class="token comment"># OK，实际转化为s.set_score(60)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>score <span class="token comment"># OK，实际转化为s.get_score()</span>
<span class="token number">60</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>score <span class="token operator">=</span> <span class="token number">9999</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
ValueError<span class="token punctuation">:</span> score must between <span class="token number">0</span> <span class="token operator">~</span> <span class="token number">100</span>!
</code></pre></div><p>注意到这个神奇的<code>@property</code>，我们在对实例属性操作的时候，就知道该属性很可能不是直接暴露的，而是通过getter和setter方法来实现的。</p> <p>还可以定义只读属性，只定义getter方法，不定义setter方法就是一个只读属性：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    @<span class="token builtin">property</span>
    <span class="token keyword">def</span> <span class="token function">birth</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_birth

    @birth<span class="token punctuation">.</span>setter
    <span class="token keyword">def</span> <span class="token function">birth</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_birth <span class="token operator">=</span> value

    @<span class="token builtin">property</span>
    <span class="token keyword">def</span> <span class="token function">age</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">2015</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>_birth
</code></pre></div><p>上面的<code>birth</code>是可读写属性，而<code>age</code>就是一个<em>只读</em>属性，因为<code>age</code>可以根据<code>birth</code>和当前时间计算出来。</p> <h3 id="多重继承"><a href="#多重继承" aria-hidden="true" class="header-anchor">#</a> 多重继承</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">class1</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token keyword">class</span> <span class="token class-name">class2</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
<span class="token keyword">class</span> <span class="token class-name">classMix</span><span class="token punctuation">(</span>class1<span class="token punctuation">,</span> class2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre></div><p>MixIn的目的就是给一个类增加多个功能，这样，在设计类的时候，我们优先考虑通过多重继承来组合多个MixIn的功能，而不是设计多层次的复杂的继承关系。</p> <p>Python自带的很多库也使用了MixIn。举个例子，Python自带了<code>TCPServer</code>和<code>UDPServer</code>这两类网络服务，而要同时服务多个用户就必须使用多进程或多线程模型，这两种模型由<code>ForkingMixIn</code>和<code>ThreadingMixIn</code>提供。通过组合，我们就可以创造出合适的服务来。</p> <p>比如，编写一个多进程模式的TCP服务，定义如下：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyTCPServer</span><span class="token punctuation">(</span>TCPServer<span class="token punctuation">,</span> ForkingMixIn<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre></div><p>编写一个多线程模式的UDP服务，定义如下：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyUDPServer</span><span class="token punctuation">(</span>UDPServer<span class="token punctuation">,</span> ThreadingMixIn<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre></div><p>如果你打算搞一个更先进的协程模型，可以编写一个<code>CoroutineMixIn</code>：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyTCPServer</span><span class="token punctuation">(</span>TCPServer<span class="token punctuation">,</span> CoroutineMixIn<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre></div><p>这样一来，我们不需要复杂而庞大的继承链，只要选择组合不同的类的功能，就可以快速构造出所需的子类。</p> <p>由于Python允许使用多重继承，因此，MixIn就是一种常见的设计。</p> <p>只允许单一继承的语言（如Java）不能使用MixIn的设计。</p> <h3 id="定制类"><a href="#定制类" aria-hidden="true" class="header-anchor">#</a> 定制类</h3> <p>看到类似<code>__slots__</code>这种形如<code>__xxx__</code>的变量或者函数名就要注意，这些在Python中是有特殊用途的。</p> <p><code>__slots__</code>我们已经知道怎么用了，<code>__len__()</code>方法我们也知道是为了能让class作用于<code>len()</code>函数。</p> <p>除此之外，Python的class中还有许多这样有特殊用途的函数，可以帮助我们定制类。</p> <h2 id="错误处理"><a href="#错误处理" aria-hidden="true" class="header-anchor">#</a> 错误处理</h2> <p>try
让我们用一个例子来看看try的机制：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'try...'</span><span class="token punctuation">)</span>
    r <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token number">0</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'result:'</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
<span class="token keyword">except</span> ZeroDivisionError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'except:'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
<span class="token keyword">finally</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'finally...'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'END'</span><span class="token punctuation">)</span>
</code></pre></div><p>当我们认为某些代码可能会出错时，就可以用try来运行这段代码，如果执行出错，则后续代码不会继续执行，而是直接跳转至错误处理代码，即except语句块，执行完except后，如果有finally语句块，则执行finally语句块，至此，执行完毕。</p> <p>出错的时候，一定要分析错误的调用栈信息，才能定位错误的位置。</p> <p>如果要抛出错误，首先根据需要，可以定义一个错误的class，选择好继承关系，然后，用<code>raise</code>语句抛出一个错误的实例</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># err_raise.py</span>
<span class="token keyword">class</span> <span class="token class-name">FooError</span><span class="token punctuation">(</span>ValueError<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">def</span> <span class="token function">foo</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    n <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
    <span class="token keyword">if</span> n<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> FooError<span class="token punctuation">(</span><span class="token string">'invalid value: %s'</span> <span class="token operator">%</span> s<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">10</span> <span class="token operator">/</span> n

foo<span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/about-notes/MongoDB/MongoDB 用户名密码登录.html" class="prev">MongoDB 用户名密码登录</a></span> <span class="next"><a href="/about-notes/Python/Python IO 编程.html">Pyhton IO 编程（文件）</a>
      →
    </span></p></div> </main></div><div class="global-ui"><SWUpdatePopup></SWUpdatePopup></div></div>
    <script src="/about-notes/assets/js/app.46379bb3.js" defer></script><script src="/about-notes/assets/js/2.c87c5fc1.js" defer></script><script src="/about-notes/assets/js/234.c79c48e9.js" defer></script>
  </body>
</html>
